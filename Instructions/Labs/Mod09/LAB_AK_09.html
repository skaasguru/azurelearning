<!doctype html>
<html lang="en">
    
<!-- Mirrored from microsoftlearning.github.io/20532-DevelopingMicrosoftAzureSolutions/Instructions/Labs/Mod09/LAB_AK_09.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 12 Feb 2020 04:43:06 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
        <title>
            20532: Developing Microsoft Azure Solutions - Module 9: Automating Integration with Azure Resources
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <link rel="stylesheet" href="https://assets/css/style3a94.css?v=d86f0e41cbfc727fd1aa5c93305bbd3184d0b042">
    </head>
    <body data-spy="scroll" data-target="#linksMenu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container d-flex justify-content-between">
            <a class="my-1 title text-azure text-uppercase" href="http://microsoftlearning.github.io/20532-DevelopingMicrosoftAzureSolutions">
                20532: Developing Microsoft Azure Solutions
            </a>
            <a href="https://github.com/MicrosoftLearning/20532-DevelopingMicrosoftAzureSolutions" target="_blank" class="btn btn-sm btn-outline-secondary text-light">
                <i class="fa fa-github" aria-hidden="true"></i>
                <span class="ml-2">GitHub</span>
            </a>
        </div>
    </nav>
    <div class="container">
        <main class="row extra-padding">
            <aside class="col-sm-2">       
                <nav id="linksMenu" class="toc sticky-top">
                    <ul class="nav navbar-nav flex-column">
                    </ul>
                </nav>         
            </aside>
            <hr class="" />
            <article class="col-sm-10 mb-5">
                <h1 id="module-9-automating-integration-with-azure-resources">Module 9: Automating Integration with Azure Resources</h1>

<h1 id="lab-automating-the-creation-of-azure-assets-using-powershell-and-the-azure-cli">Lab: Automating the Creation of Azure Assets using PowerShell and the Azure CLI</h1>

<h2 id="exercise-1-use-azure-cli-to-create-and-manage-an-azure-web-app">Exercise 1: Use Azure CLI to Create and Manage an Azure Web App</h2>

<h4 id="task-1-preparing-the-azure-cli-environment">Task 1: Preparing the Azure CLI Environment</h4>

<ol>
  <li>
    <p>On the Start screen, click the <strong>Internet Explorer</strong> tile.</p>
  </li>
  <li>
    <p>Go to <em>(<a href="https://aka.ms/installazurecliwindows">https://aka.ms/installazurecliwindows</a>)</em>.</p>
  </li>
  <li>
    <p>In the <strong>Internet Explorer</strong> download dialog box, click <strong>Save</strong>.</p>

    <blockquote>
      <p><strong>Note</strong>: The download of the executable typically takes around two minutes.</p>
    </blockquote>
  </li>
  <li>
    <p>Click the <strong>Windows File Explorer</strong> icon in your Taskbar.</p>
  </li>
  <li>
    <p>On the left navigation bar, expand the <strong>This PC</strong> node and click the <strong>Downloads</strong> node:</p>
  </li>
  <li>
    <p>Right-click the <strong>azure-cli</strong> MSI installer and select the <strong>Properties</strong> option.</p>
  </li>
  <li>
    <p>In the <strong>azure-cli Properties</strong> dialog box, do the following:</p>

    <p>a. Ensure the <strong>Unblock</strong> checkbox is selected.</p>

    <p>a. Click the <strong>OK</strong> button.</p>
  </li>
  <li>
    <p>Right-click the <strong>azure-cli</strong> MSI installer and select the <strong>Install</strong> option.</p>
  </li>
  <li>
    <p>In the <strong>Microsoft CLI 2.0 for Azure Setup</strong> dialog, perform the following actions:</p>

    <p>a. Ensure the <strong>I accept the terms in the License Agreement</strong> checkbox is selected.</p>

    <p>a. Click the <strong>Install</strong> button.</p>
  </li>
  <li>
    <p>Wait for the installation process to complete.</p>
  </li>
  <li>
    <p>Click the <strong>Finish</strong> button to close the installer.</p>
  </li>
  <li>
    <p>On the Start screen, click the down arrow to view all the applications, and then click <strong>Command Prompt</strong>.</p>
  </li>
  <li>
    <p>Switch to the <strong>Command Prompt</strong> window.</p>
  </li>
  <li>
    <p>To validate that the <strong>azure</strong> CLI command is available, type the following command in the console, and then press Enter:</p>

    <pre><code> az --help
</code></pre>
  </li>
</ol>

<h4 id="task-2-login-to-your-azure-subscription-using-interactive-login">Task 2: Login to Your Azure Subscription Using Interactive Login</h4>

<ol>
  <li>
    <p>To begin the interactive login process, type the following command in the console, and then press Enter:</p>

    <pre><code> az login
</code></pre>
  </li>
  <li>
    <p>Take a note of the code provided by the CLI command tool:</p>

    <blockquote>
      <p><strong>Note</strong>: The code is displayed in the command prompt. For example, you may see: <code>Enter the code A2U763CQ9 to authenticate</code>. In this example, the code is <code>A2U763CQ9</code>.</p>
    </blockquote>
  </li>
  <li>
    <p>On the Start screen, click the <strong>Internet Explorer</strong> tile.</p>
  </li>
  <li>
    <p>Go to <em>(https://microsoft.com/devicelogin)</em>.</p>
  </li>
  <li>
    <p>In the code dialog box, type in the code you recorded earlier.</p>
  </li>
  <li>
    <p>If the code is correct, the page will refresh automatically and render the name of the application requesting access to your Azure subscription (<strong>Microsoft Azure CLI</strong>).</p>
  </li>
  <li>
    <p>Click the <strong>Continue</strong> button.</p>
  </li>
  <li>
    <p>In the email address dialog box, type the email address of your Microsoft account.</p>
  </li>
  <li>
    <p>Click <strong>Next</strong>.</p>
  </li>
  <li>
    <p>In the password dialog box, type the password for your Microsoft account.</p>
  </li>
  <li>
    <p>Click <strong>Sign In</strong>.</p>

    <blockquote>
      <p><strong>Note</strong>: If you were successful, you will see the message <em>“You have signed in to the Microsoft Azure Cross-platform Command Line Interface application on your device”</em>. The code has a timeout so it is possible to not login quickly enough using the Device Login page. If this happens, simply repeat this task.</p>
    </blockquote>
  </li>
  <li>
    <p>Return to the <strong>Command Prompt</strong> application.</p>
  </li>
  <li>
    <p>To view your account details, type the following command in the console, and then press Enter:</p>

    <pre><code> az account list
</code></pre>

    <blockquote>
      <p><strong>Note</strong>: If you have multiple Azure subscriptions, you can use <strong>az account set –subscription [subscription-name]</strong> to select the appropriate subscription. If you are unsure about your subscription’s name, you can simply use <strong>az account list</strong>. If your Azure subscription is provided by a Learning Partner, it might be an auto-generated account without any details. In such a case, this command will return an empty result.</p>
    </blockquote>
  </li>
</ol>

<blockquote>
  <p><strong>Results</strong>: After completing this exercise, you will have set up a development environment to use xPlat CLI for Azure service automation.</p>
</blockquote>

<h4 id="task-3-create-a-new-web-app">Task 3: Create a New Web App</h4>

<ol>
  <li>
    <p>To create a new Resource Group, type the following command in the console by providing the name <strong>rga20532</strong>, the <strong>West US</strong> location and then press Enter:</p>

    <pre><code> az group create --name MOD09ZCLI --location "West US"
</code></pre>

    <blockquote>
      <p><strong>Note</strong>: You might get an error message notifying you that your Website’s name is not unique. If this occurs, select a new name until your Website is created.</p>
    </blockquote>
  </li>
  <li>
    <p>To view a list of your Resource Groups, type the following command in the console, and then press Enter:</p>

    <pre><code> az group list
</code></pre>
  </li>
  <li>
    <p>To create a new App Service Plan Resource, type the following command in the console and then press Enter:</p>

    <pre><code> az appservice plan create --resource-group MOD09ZCLI --name InexpensivePlan --is-linux --sku B1
</code></pre>
  </li>
  <li>
    <p>To create a new Web App Resource, type the following command in the console by providing the unique name selected for your Web App and then press Enter:</p>

    <pre><code> az webapp create --name [Unique Name] --resource-group MOD09ZCLI --plan InexpensivePlan --runtime "node|6.2"
</code></pre>

    <blockquote>
      <p><strong>Note</strong>: You might get an error message notifying you that your Web App’s name is not unique. If this occurs, select a new name until your Website is created.</p>
    </blockquote>
  </li>
  <li>
    <p>To view a list of Resources in the <strong>MOD09ZCLI</strong> Resource Group, type the following command in the console, and then press Enter:</p>

    <pre><code> az resource list --resource-group MOD09ZCLI
</code></pre>
  </li>
  <li>
    <p>To get the details for your new Website, type the following command in the console by providing the unique name selected for your Website, and then press Enter:</p>

    <pre><code> az resource show --name [Unique Name] --resource-type "Microsoft.Web/Sites" --resource-group MOD09ZCLI
</code></pre>
  </li>
  <li>
    <p>Record the <strong>defaultHostName</strong> value from the list of key-value pairs that are generated by the previous command.</p>

    <blockquote>
      <p><strong>Note</strong>: this hostname property will look similar to this: <code>"defaultHostName": "websitepiaxfa4veu6lw.azurewebsites.net"</code>.</p>
    </blockquote>
  </li>
  <li>
    <p>To view the new Web App in Internet Explorer, type the following command in the console, and then press Enter:</p>

    <pre><code> explorer "http://[Host Name]"
</code></pre>
  </li>
  <li>
    <p>Verify that the new Web App is running.</p>
  </li>
  <li>
    <p>Close Internet Explorer.</p>
  </li>
  <li>
    <p>Switch to the <strong>Command Prompt</strong> console window.</p>
  </li>
</ol>

<h4 id="task-4-remove-a-resource-group">Task 4: Remove a Resource Group</h4>

<ol>
  <li>
    <p>To remove your Resource Group, type the following command in the console by providing the name <strong>MOD09ZCLI</strong>, and then press Enter:</p>

    <pre><code> az group delete --name MOD09ZCLI  
</code></pre>
  </li>
  <li>
    <p>Type <strong>Y</strong> to indicate that you want to remove the Resource Group, and then press Enter.</p>
  </li>
  <li>
    <p>To verify that your Resource Group has been removed and then press Enter. The resulting array should not include the <strong>MOD09ZCLI</strong> Resource Group:</p>

    <pre><code> az group list
</code></pre>
  </li>
</ol>

<blockquote>
  <p><strong>Results</strong>: After completing this exercise, you will have used the Azure CLI to manage instances of an Azure service.</p>
</blockquote>

<h2 id="exercise-2-use-powershell-to-create-and-manage-an-azure-storage-account">Exercise 2: Use PowerShell to Create and Manage an Azure Storage Account</h2>

<h4 id="task-1-open-the-azure-powershell-console">Task 1: Open the Azure PowerShell Console</h4>

<ol>
  <li>
    <p>On the Start screen, click the down arrow to view all the applications, and then click <strong>Windows PowerShell</strong>.</p>
  </li>
  <li>
    <p>Switch to the <strong>Windows PowerShell</strong> window.</p>
  </li>
</ol>

<h4 id="task-2-authenticate-to-azure-resource-manager-using-powershell">Task 2: Authenticate to Azure Resource Manager Using PowerShell</h4>

<ol>
  <li>
    <p>To switch modules, type the following command in the console, and then press Enter:</p>

    <pre><code> Login-AzureRmAccount
</code></pre>
  </li>
  <li>
    <p>In the <strong>Sign in to your account</strong> dialog box, perform the following steps:</p>

    <p>a. Enter the email address of your Microsoft account.</p>

    <p>a. Click <strong>Next</strong>.</p>

    <p>a. Enter the password for your Microsoft account.</p>

    <p>a. Click <strong>Sign In</strong>.</p>
  </li>
  <li>
    <p>To view your current Azure PowerShell session context type the following command in the console, and then press Enter:</p>

    <pre><code> Get-AzureRmContext
</code></pre>
  </li>
</ol>

<blockquote>
  <p><strong>Note</strong>: If you have multiple Azure subscriptions, you can use <strong>Select-AzureRmSubscription</strong> to select the appropriate subscription.</p>
</blockquote>

<h4 id="task-3-create-a-resource-group-by-using-powershell">Task 3: Create a resource group by using PowerShell</h4>

<ol>
  <li>
    <p>To create a new instance of a resource group from the template, type the following command in the console, and then press Enter:</p>

    <pre><code> New-AzureRmResourceGroup -Name MOD09ZPSH -Location "West US"
</code></pre>
  </li>
  <li>
    <p>To provide the parameters for the template, type the following command in the console, and then perform the following steps:</p>

    <pre><code> New-AzureRmResourceGroupDeployment -ResourceGroupName MOD09ZPSH -TemplateFile "F:\Mod09\Labfiles\Starter\azuredeploy.json"
</code></pre>

    <p>a. For the <strong>administratorLogin</strong> prompt, provide the value <strong>testuser</strong>, and then press Enter.</p>

    <p>a. For the <strong>administratorLoginPassword</strong> prompt, provide the value <strong>TestPa$$w0rd</strong>, and press Enter.</p>

    <blockquote>
      <p><strong>Note</strong>: Wait for the provisioning process to complete. Status messages will be displayed periodically and the final message with the details will be displayed when provisioning is complete.</p>
    </blockquote>
  </li>
  <li>
    <p>To get the details of your new resource group, type the following command in the console by providing the unique name selected for your Website, and then press Enter:</p>

    <pre><code> Get-AzureRmResourceGroup –ResourceGroupName MOD09ZPSH
</code></pre>
  </li>
  <li>
    <p>To get the details of your new Website, type the following command in the console by providing the unique name selected for your Website, and then press Enter:</p>

    <pre><code> (Get-AzureRmResource -IsCollection -ResourceGroupName MOD09ZPSH -ResourceType "Microsoft.Web/sites" -ApiVersion 2016-08-01).Properties
</code></pre>
  </li>
  <li>
    <p>Record the value of the <strong>hostNames</strong> property from the JSON data generated by the previous command.</p>

    <blockquote>
      <p><strong>Note</strong>: this hostname property will look similar to this: <code>DefaultHostName : websitepiaxfa4veu6lw.azurewebsites.net</code>.</p>
    </blockquote>
  </li>
  <li>
    <p>To view the new Website in Internet Explorer, type the following command in the console, and then press Enter:</p>

    <pre><code> explorer "http://[Host Name]"
</code></pre>
  </li>
  <li>
    <p>Verify that the new Website is running.</p>
  </li>
  <li>
    <p>Close Internet Explorer.</p>
  </li>
  <li>
    <p>Switch to the <strong>Windows PowerShell</strong> console window.</p>
  </li>
</ol>

<h4 id="task-4-remove-the-resource-group-by-using-powershell">Task 4: Remove the resource group by using PowerShell</h4>

<ol>
  <li>
    <p>To remove your new resource group, type the following command in the console, and then press Enter:</p>

    <pre><code> Remove-AzureRmResourceGroup –Name MOD09ZPSH
</code></pre>
  </li>
  <li>
    <p>Type <strong>Y</strong> to indicate that you want to remove the Website, and then press Enter.</p>

    <blockquote>
      <p><strong>Note</strong>: Because removing a resource group involves removing multiple resources, this process can take 5 to 15 minutes on average.</p>
    </blockquote>
  </li>
  <li>
    <p>Close the <strong>Windows PowerShell</strong> console window.</p>
  </li>
</ol>

<blockquote>
  <p><strong>Results</strong>: After completing this exercise, you will have used Azure to interact with the Resource Manager, resource groups, and resource group templates.</p>
</blockquote>

            </article>
        </main>
    </div>
    <footer class="fixed-bottom">
        <nav class="navbar navbar-light bg-light d-flex justify-content-around">
            <span class="navbar-text">
                <i class="fa fa-github" aria-hidden="true"></i>
                <a href="https://github.com/MicrosoftLearning/20532-DevelopingMicrosoftAzureSolutions" target="_blank" class="ml-2">
                    MicrosoftLearning/20532-DevelopingMicrosoftAzureSolutions
                </a>
            </span>
        </nav>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script>
        $(function() {
            $('article img').each(function() {
                var src = $(this).attr('src');
                $(this).wrap('<a href="' + src + '" target="_blank"></a>');
            });
            $('article > h2').each(function() {
                $('nav.toc > ul').append(
                    $('<li>')
                        .attr('class', 'nav-item')
                        .append(
                            $('<a>')
                                .attr('class', 'nav-link')
                                .text($(this).text())
                                .attr('href', '#' + $(this).attr('id'))
                        ) 
                );
            });
            $('[data-spy="scroll"]').each(function () {
                var $spy = $(this).scrollspy('refresh')
            });
        });
    </script>
</body>


<!-- Mirrored from microsoftlearning.github.io/20532-DevelopingMicrosoftAzureSolutions/Instructions/Labs/Mod09/LAB_AK_09.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 12 Feb 2020 04:43:06 GMT -->
</html>
